(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c86b6844"],{2471:function(e,t,c){},2827:function(e,t,c){"use strict";c("2471")},bb51:function(e,t,c){"use strict";c.r(t);c("fb6a"),c("b0c0");var n=c("7a23"),a=Object(n["R"])("data-v-664c20eb");Object(n["A"])("data-v-664c20eb");var o=Object(n["h"])("商品分类"),i={id:"mainbox"},l={class:"ordertab"},u={class:"goodslist"},r={class:"content"};Object(n["y"])();var b=a((function(e,t,c,b,s,d){var O=Object(n["F"])("nav-bar"),j=Object(n["F"])("van-tab"),f=Object(n["F"])("van-tabs"),v=Object(n["F"])("van-sidebar-item"),p=Object(n["F"])("van-collapse-item"),m=Object(n["F"])("van-collapse"),g=Object(n["F"])("van-sidebar"),h=Object(n["F"])("van-card"),k=Object(n["F"])("back-top");return Object(n["x"])(),Object(n["f"])("div",null,[Object(n["i"])(O,null,{default:a((function(){return[o]})),_:1}),Object(n["i"])("div",i,[Object(n["i"])("div",l,[Object(n["i"])(f,{modelValue:b.active,"onUpdate:modelValue":t[1]||(t[1]=function(e){return b.active=e}),onClick:b.tabClick,animated:""},{default:a((function(){return[Object(n["i"])(j,{title:"销量排序"}),Object(n["i"])(j,{title:"价格排序"}),Object(n["i"])(j,{title:"评论排序"})]})),_:1},8,["modelValue","onClick"])]),Object(n["i"])(g,{class:"leftmenu",modelValue:b.activeKey,"onUpdate:modelValue":t[3]||(t[3]=function(e){return b.activeKey=e})},{default:a((function(){return[Object(n["i"])(m,{modelValue:b.activeName,"onUpdate:modelValue":t[2]||(t[2]=function(e){return b.activeName=e}),accordion:""},{default:a((function(){return[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(b.categories.slice(0,9),(function(e){return Object(n["x"])(),Object(n["f"])(p,{key:e.id,title:e.name,name:e.name},{default:a((function(){return[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(e.children,(function(e){return Object(n["x"])(),Object(n["f"])(v,{key:e.id,title:e.name,onClick:function(t){return b.getGoods(e.id)}},null,8,["title","onClick"])})),128))]})),_:2},1032,["title","name"])})),128))]})),_:1},8,["modelValue"])]})),_:1},8,["modelValue"]),Object(n["i"])("div",u,[Object(n["i"])("div",r,[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(b.showGoods,(function(e){return Object(n["x"])(),Object(n["f"])(h,{onClick:function(t){return b.itemClick(e.id)},key:e.id,num:e.comments_count,tag:e.comments_count>=0?"流行":"",price:e.price,desc:e.updated_at,title:e.title,thumb:e.cover_url,"lazy-load":!0},null,8,["onClick","num","tag","price","desc","title","thumb"])})),128))])])]),Object(n["P"])(Object(n["i"])(k,{onBTop:b.bTop},null,8,["onBTop"]),[[n["L"],b.isShowBackTop]])])})),s=c("2909"),d=c("a7ac"),O=c("725f"),j=c("1bab");function f(){return Object(j["a"])({url:"/api/goods"})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sales",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(j["a"])({url:"/api/goods?category_id="+t+"&page="+c+"&order="+e})}var p=c("229e"),m=c("616b"),g=c("6c02");p["a"].use(m["a"]);var h={name:"Category",setup:function(){var e=Object(g["d"])(),t=Object(n["C"])(1),c=Object(n["C"])(0),a=Object(n["C"])(1),o=Object(n["C"])([]),i=Object(n["C"])(!1),l=Object(n["C"])("sales"),u=Object(n["C"])(0),r=Object(n["B"])({sales:{page:0,list:[]},price:{page:0,list:[]},comments_count:{page:0,list:[]}}),b=Object(n["d"])((function(){return r[l.value].list})),d=function(){v("sales",u.value).then((function(e){r.sales.list=e.goods.data})),v("price",u.value).then((function(e){r.price.list=e.goods.data})),v("comments_count",u.value).then((function(e){r.comments_count.list=e.goods.data}))},O=Object(n["B"])({});Object(n["u"])((function(){f().then((function(e){o.value=e.categories})),d(),O=new p["a"](document.querySelector(".goodslist"),{probeType:3,click:!0,pullUpLoad:!0}),O.on("scroll",(function(e){i.value=-e.y>300})),O.on("pullingUp",(function(){console.log("上拉加载更多.....");var e=r[l.value].page+1;v(l.value,u.value,e).then((function(e){var t;(t=r[l.value].list).push.apply(t,Object(s["a"])(e.goods.data)),r[l.value].page+=1})),O.finishPullUp(),Object(n["p"])((function(){O&&O.refresh()})),console.log("contentheight:"+document.querySelector(".content").clientHeight),console.log("当前类型:"+l.value+",当前页："+e)}))})),Object(n["N"])((function(){Object(n["p"])((function(){O&&O.refresh()}))}));var j=function(e){var t=["sales","price","comments_count"];l.value=t[e],v(l.value,u.value).then((function(e){r[l.value].list=e.goods.data,Object(n["p"])((function(){O&&O.refresh()}))}))},m=function(e){u.value=e,d()},h=function(){O.scrollTo(0,100,300)};return{goods:r,active:t,showGoods:b,activeKey:c,activeName:a,categories:o,currentOrder:l,isShowBackTop:i,bTop:h,getGoods:m,tabClick:j,itemClick:function(t){console.log(t),e.push({path:"/detail",query:{id:t}})}}},components:{NavBar:d["a"],BackTop:O["a"]}};c("2827");h.render=b,h.__scopeId="data-v-664c20eb";t["default"]=h}}]);
//# sourceMappingURL=chunk-c86b6844.ef044ab9.js.map